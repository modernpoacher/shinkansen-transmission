"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.transformSchemaArrayItemNull=transformSchemaArrayItemNull;exports.transformSchemaArrayItemBoolean=transformSchemaArrayItemBoolean;exports.transformSchemaArrayItemObject=transformSchemaArrayItemObject;exports.transformSchemaArrayItemArray=transformSchemaArrayItemArray;exports.transformSchemaArrayItemString=transformSchemaArrayItemString;exports.transformSchemaArrayItemNumber=transformSchemaArrayItemNumber;exports.transformSchemaArrayItem=transformSchemaArrayItem;exports.transformSchemaNull=transformSchemaNull;exports.transformSchemaBoolean=transformSchemaBoolean;exports.transformSchemaObject=transformSchemaObject;exports.transformSchemaArray=transformSchemaArray;exports.transformSchemaString=transformSchemaString;exports.transformSchemaNumber=transformSchemaNumber;exports.transformSchema=transformSchema;exports.transformArrayItemNull=transformArrayItemNull;exports.transformArrayItemBoolean=transformArrayItemBoolean;exports.transformArrayItemObject=transformArrayItemObject;exports.transformArrayItemArray=transformArrayItemArray;exports.transformArrayItemString=transformArrayItemString;exports.transformArrayItemNumber=transformArrayItemNumber;exports.transformArrayItem=transformArrayItem;exports.transformNull=transformNull;exports.transformBoolean=transformBoolean;exports.transformObject=transformObject;exports.transformArray=transformArray;exports.transformString=transformString;exports.transformNumber=transformNumber;exports.default=transform;exports.getStep=exports.getPattern=exports.getIsExclusiveMax=exports.getIsExclusiveMin=exports.getMaxProperties=exports.getMinProperties=exports.getMaxContains=exports.getMinContains=exports.getHasUniqueItems=exports.getMaxItems=exports.getMinItems=exports.getMaxLength=exports.getMinLength=exports.getMax=exports.getMin=exports.getDefaultValue=exports.getIsWriteOnly=exports.getIsReadOnly=exports.getDescription=exports.getTitle=void 0;function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance");}function _iterableToArrayLimit(arr,i){if(!(Symbol.iterator in Object(arr)||Object.prototype.toString.call(arr)==="[object Arguments]")){return;}var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i["return"]!=null)_i["return"]();}finally{if(_d)throw _e;}}return _arr;}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}var getTitle=function getTitle(_ref){var title=_ref.title;return title?{title:title}:{};};exports.getTitle=getTitle;var getDescription=function getDescription(_ref2){var description=_ref2.description;return description?{description:description}:{};};exports.getDescription=getDescription;var getIsReadOnly=function getIsReadOnly(_ref3){var _ref3$readOnly=_ref3.readOnly,readOnly=_ref3$readOnly===void 0?false:_ref3$readOnly;return readOnly?{readOnly:readOnly}:{};};exports.getIsReadOnly=getIsReadOnly;var getIsWriteOnly=function getIsWriteOnly(_ref4){var _ref4$writeOnly=_ref4.writeOnly,writeOnly=_ref4$writeOnly===void 0?false:_ref4$writeOnly;return writeOnly?{writeOnly:writeOnly}:{};};exports.getIsWriteOnly=getIsWriteOnly;var getDefaultValue=function getDefaultValue(schema){return Reflect.has(schema,'default')?{defaultValue:Reflect.get(schema,'default')}:{};};exports.getDefaultValue=getDefaultValue;var toNumber=function toNumber(v){if(typeof v==='number')return v;if(typeof v==='string')return Number(v);return NaN;};var getMin=function getMin(_ref5){var minimum=_ref5.minimum;var value=toNumber(minimum);return isNaN(value)?{}:{min:value};};exports.getMin=getMin;var getMax=function getMax(_ref6){var maximum=_ref6.maximum;var value=toNumber(maximum);return isNaN(value)?{}:{max:value};};exports.getMax=getMax;var getMinLength=function getMinLength(_ref7){var minLength=_ref7.minLength;var value=toNumber(minLength);return isNaN(value)?{}:{minLength:value};};exports.getMinLength=getMinLength;var getMaxLength=function getMaxLength(_ref8){var maxLength=_ref8.maxLength;var value=toNumber(maxLength);return isNaN(value)?{}:{maxLength:value};};exports.getMaxLength=getMaxLength;var getMinItems=function getMinItems(_ref9){var minItems=_ref9.minItems;var value=toNumber(minItems);return isNaN(value)?{}:{minItems:value};};exports.getMinItems=getMinItems;var getMaxItems=function getMaxItems(_ref10){var maxItems=_ref10.maxItems;var value=toNumber(maxItems);return isNaN(value)?{}:{maxItems:value};};exports.getMaxItems=getMaxItems;var getHasUniqueItems=function getHasUniqueItems(schema){if(Reflect.has(schema,'uniqueItems')){var value=Reflect.get(schema,'uniqueItems');return typeof value==='boolean'?{hasUniqueItems:value}:{};}return{};};exports.getHasUniqueItems=getHasUniqueItems;var getMinContains=function getMinContains(_ref11){var minContains=_ref11.minContains;var value=toNumber(minContains);return isNaN(value)?{}:{minContains:value};};exports.getMinContains=getMinContains;var getMaxContains=function getMaxContains(_ref12){var maxContains=_ref12.maxContains;var value=toNumber(maxContains);return isNaN(value)?{}:{maxContains:value};};exports.getMaxContains=getMaxContains;var getMinProperties=function getMinProperties(_ref13){var minProperties=_ref13.minProperties;var value=toNumber(minProperties);return isNaN(value)?{}:{minProperties:value};};exports.getMinProperties=getMinProperties;var getMaxProperties=function getMaxProperties(_ref14){var maxProperties=_ref14.maxProperties;var value=toNumber(maxProperties);return isNaN(value)?{}:{maxProperties:value};};exports.getMaxProperties=getMaxProperties;var getIsExclusiveMin=function getIsExclusiveMin(schema){if(Reflect.has(schema,'exclusiveMinimum')){var value=Reflect.get(schema,'exclusiveMinimum');return typeof value==='boolean'?{isExclusiveMin:value}:{};}return{};};exports.getIsExclusiveMin=getIsExclusiveMin;var getIsExclusiveMax=function getIsExclusiveMax(schema){if(Reflect.has(schema,'exclusiveMaximum')){var value=Reflect.get(schema,'exclusiveMaximum');return typeof value==='boolean'?{isExclusiveMax:value}:{};}return{};};exports.getIsExclusiveMax=getIsExclusiveMax;var getPattern=function getPattern(_ref15){var pattern=_ref15.pattern;return pattern?{pattern:pattern}:{};};exports.getPattern=getPattern;var getStep=function getStep(_ref16){var multipleOf=_ref16.multipleOf;var value=toNumber(multipleOf);return isNaN(value)?{}:{step:value};};exports.getStep=getStep;function transformSchemaArrayItemNull(fieldName,schema,rootSchema,isRequired){return{meta:{arrayName:fieldName,type:'null',schema:schema,rootSchema:rootSchema,required:isRequired},elements:_objectSpread({},getTitle(schema),{},getDescription(schema),{field:{type:'null',required:isRequired}})};}function transformSchemaArrayItemBoolean(fieldName,schema,rootSchema,isRequired){return{meta:{arrayName:fieldName,type:'boolean',schema:schema,rootSchema:rootSchema,required:isRequired},elements:_objectSpread({},getTitle(schema),{},getDescription(schema),{field:{type:'boolean',required:isRequired}})};}function transformSchemaArrayItemObject(fieldName,schema,rootSchema,isRequired){var _schema$properties=schema.properties,properties=_schema$properties===void 0?{}:_schema$properties,_schema$required=schema.required,required=_schema$required===void 0?[]:_schema$required;return{meta:_objectSpread({arrayName:fieldName,type:'object',schema:schema,rootSchema:rootSchema},getMaxProperties(schema),{},getMinProperties(schema),{required:isRequired}),elements:_objectSpread({},getTitle(schema),{},getDescription(schema),{fields:Object.entries(properties).reduce(function(accumulator,_ref17){var _ref18=_slicedToArray(_ref17,2),fieldName=_ref18[0],schema=_ref18[1];return accumulator.concat(transformSchema(fieldName,schema,rootSchema,required.includes(fieldName)));},[])})};}function transformSchemaArrayItemArray(fieldName,schema,rootSchema,isRequired){var _schema$items=schema.items,items=_schema$items===void 0?[]:_schema$items;return{meta:_objectSpread({arrayName:fieldName,type:'array',schema:schema,rootSchema:rootSchema},getMinItems(schema),{},getMaxItems(schema),{},getHasUniqueItems(schema),{},getMaxContains(schema),{},getMinContains(schema),{required:isRequired}),elements:_objectSpread({},getTitle(schema),{},getDescription(schema),{fields:[].concat(items).reduce(function(accumulator,item){return accumulator.concat(transformSchemaArrayItem(fieldName,item,rootSchema,isRequired));},[])})};}function transformSchemaArrayItemString(fieldName,schema,rootSchema,isRequired){var minLength=getMinLength(schema);var maxLength=getMaxLength(schema);var pattern=getPattern(schema);return{meta:_objectSpread({arrayName:fieldName,type:'string',schema:schema,rootSchema:rootSchema},minLength,{},maxLength,{},pattern,{required:isRequired}),elements:_objectSpread({},getTitle(schema),{},getDescription(schema),{field:_objectSpread({type:'string'},minLength,{},maxLength,{},pattern,{required:isRequired})})};}function transformSchemaArrayItemNumber(fieldName,schema,rootSchema,isRequired){var min=getMin(schema);var max=getMax(schema);var step=getStep(schema);return{meta:_objectSpread({arrayName:fieldName,type:'number',schema:schema,rootSchema:rootSchema},getIsExclusiveMin(schema),{},getIsExclusiveMax(schema),{},min,{},max,{},step,{required:isRequired}),elements:_objectSpread({},getTitle(schema),{},getDescription(schema),{field:_objectSpread({type:'number'},min,{},max,{},step,{required:isRequired})})};}function transformSchemaArrayItem(fieldName){var schema=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var rootSchema=arguments.length>2&&arguments[2]!==undefined?arguments[2]:schema;var isRequired=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var type=schema.type;switch(type){case'null':return transformSchemaArrayItemNull(fieldName,schema,rootSchema,isRequired);case'boolean':return transformSchemaArrayItemBoolean(fieldName,schema,rootSchema,isRequired);case'object':return transformSchemaArrayItemObject(fieldName,schema,rootSchema,isRequired);case'array':return transformSchemaArrayItemArray(fieldName,schema,rootSchema,isRequired);case'string':return transformSchemaArrayItemString(fieldName,schema,rootSchema,isRequired);case'number':return transformSchemaArrayItemNumber(fieldName,schema,rootSchema,isRequired);default:throw new Error('Schema does not conform to Instance Data Model, https://json-schema.org/draft/2019-09/json-schema-core.html#rfc.section.4.2.1');}}function transformSchemaNull(fieldName,schema,rootSchema,isRequired){return{meta:{name:fieldName,type:'null',schema:schema,rootSchema:rootSchema,required:isRequired},elements:_objectSpread({},getTitle(schema),{},getDescription(schema),{field:{name:fieldName,type:'null',required:isRequired}})};}function transformSchemaBoolean(fieldName,schema,rootSchema,isRequired){return{meta:{name:fieldName,type:'boolean',schema:schema,rootSchema:rootSchema,required:isRequired},elements:_objectSpread({},getTitle(schema),{},getDescription(schema),{field:{name:fieldName,type:'boolean',required:isRequired}})};}function transformSchemaObject(fieldName,schema,rootSchema,isRequired){var _schema$properties2=schema.properties,properties=_schema$properties2===void 0?{}:_schema$properties2,_schema$required2=schema.required,required=_schema$required2===void 0?[]:_schema$required2;return{meta:_objectSpread({name:fieldName,type:'object',schema:schema,rootSchema:rootSchema},getMaxProperties(schema),{},getMinProperties(schema),{required:isRequired}),elements:_objectSpread({},getTitle(schema),{},getDescription(schema),{fields:Object.entries(properties).reduce(function(accumulator,_ref19){var _ref20=_slicedToArray(_ref19,2),fieldName=_ref20[0],schema=_ref20[1];return accumulator.concat(transformSchema(fieldName,schema,rootSchema,required.includes(fieldName)));},[])})};}function transformSchemaArray(fieldName,schema,rootSchema,isRequired){var _schema$items2=schema.items,items=_schema$items2===void 0?[]:_schema$items2;return{meta:_objectSpread({name:fieldName,type:'array',schema:schema,rootSchema:rootSchema},getMinItems(schema),{},getMaxItems(schema),{},getHasUniqueItems(schema),{},getMaxContains(schema),{},getMinContains(schema),{required:isRequired}),elements:_objectSpread({},getTitle(schema),{},getDescription(schema),{fields:[].concat(items).reduce(function(accumulator,item){return accumulator.concat(transformSchemaArrayItem(fieldName,item,rootSchema,isRequired));},[])})};}function transformSchemaString(fieldName,schema,rootSchema,isRequired){var minLength=getMinLength(schema);var maxLength=getMaxLength(schema);var pattern=getPattern(schema);return{meta:_objectSpread({name:fieldName,type:'string',schema:schema,rootSchema:rootSchema},minLength,{},maxLength,{},pattern,{required:isRequired}),elements:_objectSpread({},getTitle(schema),{},getDescription(schema),{field:_objectSpread({name:fieldName,type:'string'},minLength,{},maxLength,{},pattern,{required:isRequired})})};}function transformSchemaNumber(fieldName,schema,rootSchema,isRequired){var min=getMin(schema);var max=getMax(schema);var step=getStep(schema);return{meta:_objectSpread({name:fieldName,type:'number',schema:schema,rootSchema:rootSchema},getIsExclusiveMin(schema),{},getIsExclusiveMax(schema),{},min,{},max,{},step,{required:isRequired}),elements:_objectSpread({},getTitle(schema),{},getDescription(schema),{field:_objectSpread({name:fieldName,type:'number'},min,{},max,{},step,{required:isRequired})})};}function transformSchema(fieldName){var schema=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var rootSchema=arguments.length>2&&arguments[2]!==undefined?arguments[2]:schema;var isRequired=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var type=schema.type;switch(type){case'null':return transformSchemaNull(fieldName,schema,rootSchema,isRequired);case'boolean':return transformSchemaBoolean(fieldName,schema,rootSchema,isRequired);case'object':return transformSchemaObject(fieldName,schema,rootSchema,isRequired);case'array':return transformSchemaArray(fieldName,schema,rootSchema,isRequired);case'string':return transformSchemaString(fieldName,schema,rootSchema,isRequired);case'number':return transformSchemaNumber(fieldName,schema,rootSchema,isRequired);default:throw new Error('Schema does not conform to Instance Data Model, https://json-schema.org/draft/2019-09/json-schema-core.html#rfc.section.4.2.1');}}function transformArrayItemNull(schema,rootSchema,isRequired){return{meta:{type:'null',schema:schema,rootSchema:rootSchema,required:isRequired},elements:_objectSpread({},getTitle(schema),{},getDescription(schema),{field:{type:'null',required:isRequired}})};}function transformArrayItemBoolean(schema,rootSchema,isRequired){return{meta:{type:'boolean',schema:schema,rootSchema:rootSchema,required:isRequired},elements:_objectSpread({},getTitle(schema),{},getDescription(schema),{field:{type:'boolean',required:isRequired}})};}function transformArrayItemObject(schema,rootSchema,isRequired){var _schema$properties3=schema.properties,properties=_schema$properties3===void 0?{}:_schema$properties3,_schema$required3=schema.required,required=_schema$required3===void 0?[]:_schema$required3;return{meta:_objectSpread({type:'object',schema:schema,rootSchema:rootSchema},getMaxProperties(schema),{},getMinProperties(schema),{required:isRequired}),elements:_objectSpread({},getTitle(schema),{},getDescription(schema),{fields:Object.entries(properties).reduce(function(accumulator,_ref21){var _ref22=_slicedToArray(_ref21,2),fieldName=_ref22[0],schema=_ref22[1];return accumulator.concat(transformSchema(fieldName,schema,rootSchema,required.includes(fieldName)));},[])})};}function transformArrayItemArray(schema,rootSchema,isRequired){var _schema$items3=schema.items,items=_schema$items3===void 0?[]:_schema$items3;return{meta:_objectSpread({type:'array',schema:schema,rootSchema:rootSchema},getMinItems(schema),{},getMaxItems(schema),{},getHasUniqueItems(schema),{},getMaxContains(schema),{},getMinContains(schema),{required:isRequired}),elements:_objectSpread({},getTitle(schema),{},getDescription(schema),{fields:[].concat(items).reduce(function(accumulator,item){return accumulator.concat(transformArrayItem(item,rootSchema,isRequired));},[])})};}function transformArrayItemString(schema,rootSchema,isRequired){var minLength=getMinLength(schema);var maxLength=getMaxLength(schema);var pattern=getPattern(schema);return{meta:_objectSpread({type:'string',schema:schema,rootSchema:rootSchema},minLength,{},maxLength,{},pattern,{required:isRequired}),elements:_objectSpread({},getTitle(schema),{},getDescription(schema),{field:_objectSpread({type:'string'},minLength,{},maxLength,{},pattern,{required:isRequired})})};}function transformArrayItemNumber(schema,rootSchema,isRequired){var min=getMin(schema);var max=getMax(schema);var step=getStep(schema);return{meta:_objectSpread({type:'number',schema:schema,rootSchema:rootSchema},getIsExclusiveMin(schema),{},getIsExclusiveMax(schema),{},min,{},max,{},step,{required:isRequired}),elements:_objectSpread({},getTitle(schema),{},getDescription(schema),{field:_objectSpread({type:'number'},min,{},max,{},step,{required:isRequired})})};}function transformArrayItem(){var schema=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var rootSchema=arguments.length>1&&arguments[1]!==undefined?arguments[1]:schema;var isRequired=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var type=schema.type;switch(type){case'null':return transformArrayItemNull(schema,rootSchema,isRequired);case'boolean':return transformArrayItemBoolean(schema,rootSchema,isRequired);case'object':return transformArrayItemObject(schema,rootSchema,isRequired);case'array':return transformArrayItemArray(schema,rootSchema,isRequired);case'string':return transformArrayItemString(schema,rootSchema,isRequired);case'number':return transformArrayItemNumber(schema,rootSchema,isRequired);default:throw new Error('Schema does not conform to Instance Data Model, https://json-schema.org/draft/2019-09/json-schema-core.html#rfc.section.4.2.1');}}function transformNull(rootSchema){return{meta:{type:'null',schema:rootSchema},elements:_objectSpread({},getTitle(rootSchema),{},getDescription(rootSchema),{field:{type:'null'}})};}function transformBoolean(rootSchema){return{meta:{type:'boolean',schema:rootSchema},elements:_objectSpread({},getTitle(rootSchema),{},getDescription(rootSchema),{field:{type:'boolean'}})};}function transformObject(rootSchema){var _rootSchema$propertie=rootSchema.properties,properties=_rootSchema$propertie===void 0?{}:_rootSchema$propertie,_rootSchema$required=rootSchema.required,required=_rootSchema$required===void 0?[]:_rootSchema$required;return{meta:{type:'object',schema:rootSchema},elements:_objectSpread({},getTitle(rootSchema),{},getDescription(rootSchema),{fields:Object.entries(properties).reduce(function(accumulator,_ref23){var _ref24=_slicedToArray(_ref23,2),fieldName=_ref24[0],schema=_ref24[1];return accumulator.concat(transformSchema(fieldName,schema,rootSchema,required.includes(fieldName)));},[])})};}function transformArray(rootSchema){var _rootSchema$items=rootSchema.items,items=_rootSchema$items===void 0?[]:_rootSchema$items;return{meta:_objectSpread({type:'array',schema:rootSchema},getMinItems(rootSchema),{},getMaxItems(rootSchema),{},getHasUniqueItems(rootSchema),{},getMaxContains(rootSchema),{},getMinContains(rootSchema)),elements:_objectSpread({},getTitle(rootSchema),{},getDescription(rootSchema),{fields:[].concat(items).reduce(function(accumulator,item){return accumulator.concat(transformArrayItem(item,rootSchema));},[])})};}function transformString(rootSchema){var minLength=getMinLength(rootSchema);var maxLength=getMaxLength(rootSchema);var pattern=getPattern(rootSchema);return{meta:_objectSpread({type:'string',schema:rootSchema},minLength,{},maxLength,{},pattern),elements:_objectSpread({},getTitle(rootSchema),{},getDescription(rootSchema),{field:_objectSpread({type:'string'},minLength,{},maxLength,{},pattern)})};}function transformNumber(rootSchema){var min=getMin(rootSchema);var max=getMax(rootSchema);var step=getStep(rootSchema);return{meta:_objectSpread({type:'number',schema:rootSchema},getIsExclusiveMin(rootSchema),{},getIsExclusiveMax(rootSchema),{},min,{},max,{},step),elements:_objectSpread({},getTitle(rootSchema),{},getDescription(rootSchema),{field:_objectSpread({type:'number'},min,{},max,{},step)})};}function transform(){var rootSchema=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var type=rootSchema.type;switch(type){case'null':return transformNull(rootSchema);case'boolean':return transformBoolean(rootSchema);case'object':return transformObject(rootSchema);case'array':return transformArray(rootSchema);case'number':return transformNumber(rootSchema);case'string':return transformString(rootSchema);default:throw new Error('Schema does not conform to Instance Data Model, https://json-schema.org/draft/2019-09/json-schema-core.html#rfc.section.4.2.1');}}