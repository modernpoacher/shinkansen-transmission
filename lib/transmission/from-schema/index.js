"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.transformObjectSchemaNull=transformObjectSchemaNull;exports.transformObjectSchemaBoolean=transformObjectSchemaBoolean;exports.transformObjectSchemaObject=transformObjectSchemaObject;exports.transformObjectSchemaArray=transformObjectSchemaArray;exports.transformObjectSchemaString=transformObjectSchemaString;exports.transformObjectSchemaNumber=transformObjectSchemaNumber;exports.transformObjectSchema=transformObjectSchema;exports.transformArraySchemaNull=transformArraySchemaNull;exports.transformArraySchemaBoolean=transformArraySchemaBoolean;exports.transformArraySchemaObject=transformArraySchemaObject;exports.transformArraySchemaArray=transformArraySchemaArray;exports.transformArraySchemaString=transformArraySchemaString;exports.transformArraySchemaNumber=transformArraySchemaNumber;exports.transformArraySchema=transformArraySchema;exports.transformNull=transformNull;exports.transformBoolean=transformBoolean;exports.transformObject=transformObject;exports.transformArray=transformArray;exports.transformString=transformString;exports.transformNumber=transformNumber;exports.default=transform;var _common=require("../common");function transformObjectSchemaNull(schema,rootSchema,params,values){const{required:isRequired=false,uri:parentUri,key:fieldKey}=params;const uri=(0,_common.getUri)(parentUri,fieldKey);return{meta:{uri,name:fieldKey,type:'null',schema,rootSchema,required:isRequired,...(0,_common.getDefaultValue)(schema,uri),...(0,_common.getValue)(values,uri),...(0,_common.getMetaProps)(params,uri)},elements:{...(0,_common.getTitle)(schema),...(0,_common.getDescription)(schema),field:{required:isRequired,...(0,_common.getElementsFieldProps)(params,uri),...(0,_common.getElementsFieldValue)(values,uri,schema),name:uri}}};}function transformObjectSchemaBoolean(schema,rootSchema,params,values){const{required:isRequired=false,uri:parentUri,key:fieldKey}=params;const uri=(0,_common.getUri)(parentUri,fieldKey);return{meta:{uri,name:fieldKey,type:'boolean',schema,rootSchema,required:isRequired,...(0,_common.getDefaultValue)(schema,uri),...(0,_common.getValue)(values,uri),...(0,_common.getMetaProps)(params,uri)},elements:{...(0,_common.getTitle)(schema),...(0,_common.getDescription)(schema),field:{required:isRequired,...(0,_common.getElementsFieldProps)(params,uri),...(0,_common.getElementsFieldValue)(values,uri,schema),name:uri}}};}function transformObjectSchemaObject(schema,rootSchema,params,values){const{required:isRequired=false,uri:parentUri,key:fieldKey}=params;const uri=(0,_common.getUri)(parentUri,fieldKey);const meta={uri,name:fieldKey,type:'object',schema,rootSchema,...(0,_common.getMaxProperties)(schema),...(0,_common.getMinProperties)(schema),required:isRequired,...(0,_common.getDefaultValue)(schema,uri),...(0,_common.getValue)(values,uri),...(0,_common.getMetaProps)(params,uri)};let elements;if((0,_common.hasEnum)(schema)){const items=(0,_common.getEnum)(schema);elements={...(0,_common.getTitle)(schema),...(0,_common.getDescription)(schema),enum:{items,required:isRequired}};}else{if((0,_common.hasAnyOf)(schema)){const items=(0,_common.getAnyOf)(schema);elements={...(0,_common.getTitle)(schema),...(0,_common.getDescription)(schema),anyOf:{items:items.reduce((accumulator,schema,index)=>accumulator.concat(transformArraySchema(schema,rootSchema,{...params,required:isRequired,uri,index},values)),[]),required:isRequired}};}else{if((0,_common.hasOneOf)(schema)){const items=(0,_common.getAnyOf)(schema);elements={...(0,_common.getTitle)(schema),...(0,_common.getDescription)(schema),oneOf:{items:items.reduce((accumulator,schema,index)=>accumulator.concat(transformArraySchema(schema,rootSchema,{...params,required:isRequired,uri,index},values)),[]),required:isRequired}};}else{const{properties={},required=[]}=schema;elements={...(0,_common.getTitle)(schema),...(0,_common.getDescription)(schema),fields:Object.entries(properties).reduce((accumulator,[key,schema])=>accumulator.concat(transformObjectSchema(schema,rootSchema,{...params,required:required.includes(key),uri,key},values)),[])};}}}return{meta,elements};}function transformObjectSchemaArray(schema,rootSchema,params,values){const{required:isRequired=false,uri:parentUri,key:fieldKey}=params;const uri=(0,_common.getUri)(parentUri,fieldKey);const{items=[]}=schema;const fields=[].concat(items).reduce((accumulator,schema,index)=>accumulator.concat(transformArraySchema(schema,rootSchema,{...params,required:isRequired,uri,index},values)),[]);return{meta:{uri,name:fieldKey,type:'array',schema,rootSchema,...(0,_common.getMinItems)(schema),...(0,_common.getMaxItems)(schema),...(0,_common.getHasUniqueItems)(schema),...(0,_common.getMaxContains)(schema),...(0,_common.getMinContains)(schema),required:isRequired,...(0,_common.getDefaultValue)(schema,uri),...(0,_common.getValue)(values,uri),...(0,_common.getMetaProps)(params,uri)},elements:{...(0,_common.getTitle)(schema),...(0,_common.getDescription)(schema),fields}};}function transformObjectSchemaString(schema,rootSchema,params,values){const{required:isRequired=false,uri:parentUri,key:fieldKey}=params;const uri=(0,_common.getUri)(parentUri,fieldKey);const minLength=(0,_common.getMinLength)(schema);const maxLength=(0,_common.getMaxLength)(schema);const pattern=(0,_common.getPattern)(schema);const meta={uri,name:fieldKey,type:'string',schema,rootSchema,...minLength,...maxLength,...pattern,required:isRequired,...(0,_common.getDefaultValue)(schema,uri),...(0,_common.getValue)(values,uri),...(0,_common.getMetaProps)(params,uri)};let elements;if((0,_common.hasEnum)(schema)){const items=(0,_common.getEnum)(schema);elements={...(0,_common.getTitle)(schema),...(0,_common.getDescription)(schema),enum:{items,...minLength,...maxLength,...pattern,required:isRequired}};}else{if((0,_common.hasAnyOf)(schema)){const items=(0,_common.getAnyOf)(schema);elements={...(0,_common.getTitle)(schema),...(0,_common.getDescription)(schema),anyOf:{items:items.reduce((accumulator,schema,index)=>accumulator.concat(transformArraySchema(schema,rootSchema,{...params,required:isRequired,uri,index},values)),[]),...minLength,...maxLength,...pattern,required:isRequired}};}else{if((0,_common.hasOneOf)(schema)){const items=(0,_common.getOneOf)(schema);elements={...(0,_common.getTitle)(schema),...(0,_common.getDescription)(schema),oneOf:{items:items.reduce((accumulator,schema,index)=>accumulator.concat(transformArraySchema(schema,rootSchema,{...params,required:isRequired,uri,index},values)),[]),...minLength,...maxLength,...pattern,required:isRequired}};}else{elements={...(0,_common.getTitle)(schema),...(0,_common.getDescription)(schema),field:{...minLength,...maxLength,...pattern,required:isRequired,...(0,_common.getElementsFieldProps)(params,uri),...(0,_common.getElementsFieldValue)(values,uri,schema),name:uri}};}}}return{meta,elements};}function transformObjectSchemaNumber(schema,rootSchema,params,values){const{required:isRequired=false,uri:parentUri,key:fieldKey}=params;const uri=(0,_common.getUri)(parentUri,fieldKey);const min=(0,_common.getMin)(schema);const max=(0,_common.getMax)(schema);const step=(0,_common.getStep)(schema);const meta={uri,name:fieldKey,type:'number',schema,rootSchema,...(0,_common.getIsExclusiveMin)(schema),...(0,_common.getIsExclusiveMax)(schema),...min,...max,...step,required:isRequired,...(0,_common.getDefaultValue)(schema,uri),...(0,_common.getValue)(values,uri),...(0,_common.getMetaProps)(params,uri)};let elements;if((0,_common.hasEnum)(schema)){const items=(0,_common.getEnum)(schema);elements={...(0,_common.getTitle)(schema),...(0,_common.getDescription)(schema),enum:{items,...min,...max,...step,required:isRequired}};}else{if((0,_common.hasAnyOf)(schema)){const items=(0,_common.getAnyOf)(schema);elements={...(0,_common.getTitle)(schema),...(0,_common.getDescription)(schema),anyOf:{items:items.reduce((accumulator,schema,index)=>accumulator.concat(transformArraySchema(schema,rootSchema,{...params,index},values)),[]),...min,...max,...step,required:isRequired}};}else{if((0,_common.hasOneOf)(schema)){const items=(0,_common.getOneOf)(schema);elements={...(0,_common.getTitle)(schema),...(0,_common.getDescription)(schema),oneOf:{items:items.reduce((accumulator,schema,index)=>accumulator.concat(transformArraySchema(schema,rootSchema,{...params,index},values)),[]),...min,...max,...step,required:isRequired}};}else{elements={...(0,_common.getTitle)(schema),...(0,_common.getDescription)(schema),field:{...min,...max,...step,required:isRequired,...(0,_common.getElementsFieldProps)(params,uri),...(0,_common.getElementsFieldValue)(values,uri,schema),name:uri}};}}}return{meta,elements};}function transformObjectSchema(schema={},rootSchema=schema,params={},values={}){const{type}=schema;switch(type){case'null':return transformObjectSchemaNull(schema,rootSchema,params,values);case'boolean':return transformObjectSchemaBoolean(schema,rootSchema,params,values);case'object':return transformObjectSchemaObject(schema,rootSchema,params,values);case'array':return transformObjectSchemaArray(schema,rootSchema,params,values);case'string':return transformObjectSchemaString(schema,rootSchema,params,values);case'number':return transformObjectSchemaNumber(schema,rootSchema,params,values);default:throw new Error('Schema does not conform to Instance Data Model, https://json-schema.org/draft/2019-09/json-schema-core.html#rfc.section.4.2.1');}}function transformArraySchemaNull(schema,rootSchema,params,values){const{required:isRequired=false,uri:parentUri,index:arrayIndex}=params;const uri=(0,_common.getUri)(parentUri,arrayIndex);return{meta:{uri,item:arrayIndex,type:'null',schema,rootSchema,required:isRequired,...(0,_common.getDefaultValue)(schema,uri),...(0,_common.getValue)(values,uri),...(0,_common.getMetaProps)(params,uri)},elements:{...(0,_common.getTitle)(schema),...(0,_common.getDescription)(schema),field:{required:isRequired,...(0,_common.getElementsFieldProps)(params,uri),...(0,_common.getElementsFieldValue)(values,uri,schema),name:uri}}};}function transformArraySchemaBoolean(schema,rootSchema,params,values){const{required:isRequired=false,uri:parentUri,index:arrayIndex}=params;const uri=(0,_common.getUri)(parentUri,arrayIndex);return{meta:{uri,item:arrayIndex,type:'boolean',schema,rootSchema,required:isRequired,...(0,_common.getDefaultValue)(schema,uri),...(0,_common.getValue)(values,uri),...(0,_common.getMetaProps)(params,uri)},elements:{...(0,_common.getTitle)(schema),...(0,_common.getDescription)(schema),field:{required:isRequired,...(0,_common.getElementsFieldProps)(params,uri),...(0,_common.getElementsFieldValue)(values,uri,schema),name:uri}}};}function transformArraySchemaObject(schema,rootSchema,params,values){const{required:isRequired=false,uri:parentUri,index:arrayIndex}=params;const uri=(0,_common.getUri)(parentUri,arrayIndex);const meta={uri,item:arrayIndex,type:'object',schema,rootSchema,...(0,_common.getMaxProperties)(schema),...(0,_common.getMinProperties)(schema),required:isRequired,...(0,_common.getDefaultValue)(schema,uri),...(0,_common.getValue)(values,uri),...(0,_common.getMetaProps)(params,uri)};let elements;if((0,_common.hasEnum)(schema)){const items=(0,_common.getEnum)(schema);elements={...(0,_common.getTitle)(schema),...(0,_common.getDescription)(schema),enum:{items,required:isRequired}};}else{if((0,_common.hasAnyOf)(schema)){const items=(0,_common.getAnyOf)(schema);elements={...(0,_common.getTitle)(schema),...(0,_common.getDescription)(schema),anyOf:{items:items.reduce((accumulator,schema,index)=>accumulator.concat(transformArraySchema(schema,rootSchema,{...params,uri,index},values)),[]),required:isRequired}};}else{if((0,_common.hasOneOf)(schema)){const items=(0,_common.getAnyOf)(schema);elements={...(0,_common.getTitle)(schema),...(0,_common.getDescription)(schema),oneOf:{items:items.reduce((accumulator,schema,index)=>accumulator.concat(transformArraySchema(schema,rootSchema,{...params,uri,index},values)),[]),required:isRequired}};}else{const{properties={},required=[]}=schema;elements={...(0,_common.getTitle)(schema),...(0,_common.getDescription)(schema),fields:Object.entries(properties).reduce((accumulator,[key,schema])=>accumulator.concat(transformObjectSchema(schema,rootSchema,{...params,required:required.includes(key),uri,key},values)),[])};}}}return{meta,elements};}function transformArraySchemaArray(schema,rootSchema,params,values){const{required:isRequired=false,uri:parentUri,index:arrayIndex}=params;const uri=(0,_common.getUri)(parentUri,arrayIndex);const{items=[]}=schema;const fields=[].concat(items).reduce((accumulator,schema,index)=>accumulator.concat(transformArraySchema(schema,rootSchema,{...params,uri,index},values)),[]);return{meta:{uri,item:arrayIndex,type:'array',schema,rootSchema,...(0,_common.getMinItems)(schema),...(0,_common.getMaxItems)(schema),...(0,_common.getHasUniqueItems)(schema),...(0,_common.getMaxContains)(schema),...(0,_common.getMinContains)(schema),required:isRequired,...(0,_common.getDefaultValue)(schema,uri),...(0,_common.getValue)(values,uri),...(0,_common.getMetaProps)(params,uri)},elements:{...(0,_common.getTitle)(schema),...(0,_common.getDescription)(schema),fields}};}function transformArraySchemaString(schema,rootSchema,params,values){const{required:isRequired=false,uri:parentUri,index:arrayIndex}=params;const uri=(0,_common.getUri)(parentUri,arrayIndex);const minLength=(0,_common.getMinLength)(schema);const maxLength=(0,_common.getMaxLength)(schema);const pattern=(0,_common.getPattern)(schema);return{meta:{uri,item:arrayIndex,type:'string',schema,rootSchema,...minLength,...maxLength,...pattern,required:isRequired,...(0,_common.getDefaultValue)(schema,uri),...(0,_common.getValue)(values,uri),...(0,_common.getMetaProps)(params,uri)},elements:{...(0,_common.getTitle)(schema),...(0,_common.getDescription)(schema),field:{...minLength,...maxLength,...pattern,required:isRequired,...(0,_common.getElementsFieldProps)(params,uri),...(0,_common.getElementsFieldValue)(values,uri,schema),name:uri}}};}function transformArraySchemaNumber(schema,rootSchema,params,values){const{required:isRequired=false,uri:parentUri,index:arrayIndex}=params;const uri=(0,_common.getUri)(parentUri,arrayIndex);const min=(0,_common.getMin)(schema);const max=(0,_common.getMax)(schema);const step=(0,_common.getStep)(schema);return{meta:{uri,item:arrayIndex,type:'number',schema,rootSchema,...(0,_common.getIsExclusiveMin)(schema),...(0,_common.getIsExclusiveMax)(schema),...min,...max,...step,required:isRequired,...(0,_common.getDefaultValue)(schema,uri),...(0,_common.getValue)(values,uri),...(0,_common.getMetaProps)(params,uri)},elements:{...(0,_common.getTitle)(schema),...(0,_common.getDescription)(schema),field:{...min,...max,...step,required:isRequired,...(0,_common.getElementsFieldProps)(params,uri),...(0,_common.getElementsFieldValue)(values,uri,schema),name:uri}}};}function transformArraySchema(schema={},rootSchema=schema,params={},values={}){const{type}=schema;switch(type){case'null':return transformArraySchemaNull(schema,rootSchema,params,values);case'boolean':return transformArraySchemaBoolean(schema,rootSchema,params,values);case'object':return transformArraySchemaObject(schema,rootSchema,params,values);case'array':return transformArraySchemaArray(schema,rootSchema,params,values);case'string':return transformArraySchemaString(schema,rootSchema,params,values);case'number':return transformArraySchemaNumber(schema,rootSchema,params,values);default:throw new Error('Schema does not conform to Instance Data Model, https://json-schema.org/draft/2019-09/json-schema-core.html#rfc.section.4.2.1');}}function transformNull(rootSchema,params,values){const uri=(0,_common.getUri)();return{meta:{uri,type:'null',schema:rootSchema,...(0,_common.getDefaultValue)(rootSchema,uri),...(0,_common.getValue)(values,uri),...(0,_common.getMetaProps)(params,uri)},elements:{...(0,_common.getTitle)(rootSchema),...(0,_common.getDescription)(rootSchema),field:{...(0,_common.getElementsFieldProps)(params,uri),...(0,_common.getElementsFieldValue)(values,uri,rootSchema),name:uri}}};}function transformBoolean(rootSchema,params,values){const uri=(0,_common.getUri)();return{meta:{uri,type:'boolean',schema:rootSchema,...(0,_common.getDefaultValue)(rootSchema,uri),...(0,_common.getValue)(values,uri),...(0,_common.getMetaProps)(params,uri)},elements:{...(0,_common.getTitle)(rootSchema),...(0,_common.getDescription)(rootSchema),field:{...(0,_common.getElementsFieldProps)(params,uri),...(0,_common.getElementsFieldValue)(values,uri,rootSchema),name:uri}}};}function transformObject(rootSchema,params,values){const{properties={},required=[]}=rootSchema;const uri=(0,_common.getUri)();const meta={uri,type:'object',schema:rootSchema,...(0,_common.getDefaultValue)(rootSchema,uri),...(0,_common.getValue)(values,uri),...(0,_common.getMetaProps)(params,uri)};let elements;if((0,_common.hasEnum)(rootSchema)){const items=(0,_common.getEnum)(rootSchema);elements={...(0,_common.getTitle)(rootSchema),...(0,_common.getDescription)(rootSchema),enum:{items}};}else{if((0,_common.hasAnyOf)(rootSchema)){const items=(0,_common.getAnyOf)(rootSchema);elements={...(0,_common.getTitle)(rootSchema),...(0,_common.getDescription)(rootSchema),anyOf:{items:items.reduce((accumulator,schema,index)=>accumulator.concat(transformArraySchema(schema,rootSchema,{...params,index},values)),[])}};}else{if((0,_common.hasOneOf)(rootSchema)){const items=(0,_common.getOneOf)(rootSchema);elements={...(0,_common.getTitle)(rootSchema),...(0,_common.getDescription)(rootSchema),oneOf:{items:items.reduce((accumulator,schema,index)=>accumulator.concat(transformArraySchema(schema,rootSchema,{...params,index},values)),[])}};}else{elements={...(0,_common.getTitle)(rootSchema),...(0,_common.getDescription)(rootSchema),fields:Object.entries(properties).reduce((accumulator,[key,schema])=>accumulator.concat(transformObjectSchema(schema,rootSchema,{...params,required:required.includes(key),key},values)),[])};}}}return{meta,elements};}function transformArray(rootSchema,params,values){const{items=[]}=rootSchema;const uri=(0,_common.getUri)();const fields=[].concat(items).reduce((accumulator,schema,index)=>accumulator.concat(transformArraySchema(schema,rootSchema,{...params,index},values)),[]);return{meta:{uri,type:'array',schema:rootSchema,...(0,_common.getMinItems)(rootSchema),...(0,_common.getMaxItems)(rootSchema),...(0,_common.getHasUniqueItems)(rootSchema),...(0,_common.getMaxContains)(rootSchema),...(0,_common.getMinContains)(rootSchema),...(0,_common.getDefaultValue)(rootSchema,uri),...(0,_common.getValue)(values,uri),...(0,_common.getMetaProps)(params,uri)},elements:{...(0,_common.getTitle)(rootSchema),...(0,_common.getDescription)(rootSchema),fields}};}function transformString(rootSchema,params,values){const uri=(0,_common.getUri)();const minLength=(0,_common.getMinLength)(rootSchema);const maxLength=(0,_common.getMaxLength)(rootSchema);const pattern=(0,_common.getPattern)(rootSchema);return{meta:{uri,type:'string',schema:rootSchema,...minLength,...maxLength,...pattern,...(0,_common.getDefaultValue)(rootSchema,uri),...(0,_common.getValue)(values,uri),...(0,_common.getMetaProps)(params,uri)},elements:{...(0,_common.getTitle)(rootSchema),...(0,_common.getDescription)(rootSchema),field:{...minLength,...maxLength,...pattern,...(0,_common.getElementsFieldProps)(params,uri),...(0,_common.getElementsFieldValue)(values,uri,rootSchema),name:uri}}};}function transformNumber(rootSchema,params,values){const uri=(0,_common.getUri)();const min=(0,_common.getMin)(rootSchema);const max=(0,_common.getMax)(rootSchema);const step=(0,_common.getStep)(rootSchema);return{meta:{uri,type:'number',schema:rootSchema,...(0,_common.getIsExclusiveMin)(rootSchema),...(0,_common.getIsExclusiveMax)(rootSchema),...min,...max,...step,...(0,_common.getDefaultValue)(rootSchema,uri),...(0,_common.getValue)(values,uri),...(0,_common.getMetaProps)(params,uri)},elements:{...(0,_common.getTitle)(rootSchema),...(0,_common.getDescription)(rootSchema),field:{...min,...max,...step,...(0,_common.getElementsFieldProps)(params,uri),...(0,_common.getElementsFieldValue)(values,uri,rootSchema),name:uri}}};}function transform(rootSchema={},params={},values={}){const{type}=rootSchema;switch(type){case'null':return transformNull(rootSchema,params,values);case'boolean':return transformBoolean(rootSchema,params,values);case'object':return transformObject(rootSchema,params,values);case'array':return transformArray(rootSchema,params,values);case'number':return transformNumber(rootSchema,params,values);case'string':return transformString(rootSchema,params,values);default:throw new Error('Schema does not conform to Instance Data Model, https://json-schema.org/draft/2019-09/json-schema-core.html#rfc.section.4.2.1');}}